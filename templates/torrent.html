{% extends "base.html" %}



{% block javascript %}
    <script src="./static/javascript/torrent_action_buttons.js"></script>
    <script src="./static/javascript/torrent_change_tvshow.js"></script>
    <script src="./static/javascript/torrent_change_torrenttype.js"></script>
    <script src="./static/javascript/torrent_change_fileoutcome.js"></script>
    <script src="./static/javascript/torrent_save_config.js"></script>
    <script src="./static/javascript/torrent_edit_config.js"></script>
    <script src="./static/javascript/torrent_cancel_config.js"></script>
    <script src="./static/javascript/torrent_update_state.js"></script>
    <script src="./static/javascript/torrent_copy.js"></script>
    <script src="./static/javascript/torrent_delete.js"></script>
{% endblock %}



{% block banner %}
    <div id="TorrentTile" class="tile bannertile torrent_{{ selectedtorrent.status }}">
        <div class="readonlyfields">
            <div class="titlebox bannertitleleft" id="TorrentTitle">{{ selectedtorrent.torrenttitle }}</div><div class="titlebox bannertitleright"><img id="TorrentType" src="./static/images/type_{{ selectedtorrent.torrenttype }}.png" alt="{{ selectedtorrent.torrenttype }}" /></div>
        </div><div class="editmodefields">
            <div class="buttongroup">
                <button type="button" id="MakeUnknown" onclick="javascript:changeTorrentType('unknown');">
                    <img src="./static/images/type_unknown.png" alt="unknown button" />
                </button><button type="button" id="MakeMovie" onclick="javascript:changeTorrentType('movie');">
                    <img src="/static/images/type_movie.png" alt="movie button" />
                </button><button type="button" id="MakeTVShow" onclick="javascript:changeTorrentType('tvshow');">
                    <img src="/static/images/type_tvshow.png" alt="tv show button" />
                </button>
            </div><div class="unknownonlyfields"><span class="fieldlabel">New Unspecified Torrent</span></div><div class="tvshowonlyfields">
                <div class="narrowspacer"></div><span class="fieldlabel torrentfieldlabel">TV Show:</span><select class="tvshownamefield" name="tvshowselector" onchange="javascript:updateTVShowSeasons('');">
    </select><div class="narrowspacer"></div><span class="fieldlabel torrentfieldlabel">Season:</span><select class="tvshowseasonfield" name="tvshowseasonselector"></select>
            </div><div class="movieonlyfields">
                <div class="narrowspacer"></div><span class="fieldlabel torrentfieldlabel">Film:</span><input type="text" name="moviename" value="" class="movienamefield" /><div class="narrowspacer"></div><span class="fieldlabel torrentfieldlabel">Year:</span><input type="text" name="movieyear" value="" class="movieyearfield" />
            </div>
        </div>
        <div class="tilesplitter bannersplitter"></div><div class="subtitlebox bannersubtitleleft">
            {{ selectedtorrent.torrentname }}
        </div><div class="subtitlebox bannersubtitleright">
            <img id="Status" src="./static/images/status_{{ selectedtorrent.status }}.png" alt="{{ selectedtorrent.status }}" /><span id="Progress">{{ selectedtorrent.progress }}</span>
        </div>
    </div></div>{% endblock %}



{% block content %}
<div class="tilesgroup">{% for fileitem in selectedtorrent.files %}<div id="File-{{ fileitem.fileid }}" class="tile headlinetile file_{{ fileitem.filetype }}_{{ fileitem.outcome }}">
        <div class="readonlyfields"><div class="titlebox titleleft" id="filetitle-{{ fileitem.fileid }}">{{ fileitem.filetitle }}</div><div class="titlebox titleright"><img id="outcome-{{ fileitem.fileid }}" class="outeredgeimage" src="./static/images/fileaction_{{ fileitem.outcome }}.png" alt="{{ fileitem.outcome }}" /></div>
        </div><div class="editmodefields">{% if fileitem.filetype == "none" %}<div class="titlebox titlefullwidth buttongroupequivalent">Ignored File</div>
            {% else %}<div class="unknownonlyfields"><div class="titlebox titlefullwidth buttongroupequivalent">Do Not Save</div>
                </div><div class="movieonlyfields tvshowonlyfields"><div class="buttongroup">
                <button type="button" id="MakeIgnore-{{ fileitem.fileid }}" onclick="javascript:changeFileDesignation('{{ fileitem.fileid }}','ignore');">
                    <img src="./static/images/fileaction_ignore.png" alt="ignore button" />
                </button><button type="button" id="MakeCopy-{{ fileitem.fileid }}" onclick="javascript:changeFileDesignation('{{ fileitem.fileid }}','copy');">
                    <img src="./static/images/fileaction_copy.png" alt="copy button" />
                </button>
            </div><div class="ignoreonlyfields" id="ignoreconfig-{{ fileitem.fileid }}"><span class="fieldlabel">Do Not Save</span>
            </div><div class="copyonlyfields" id="copyconfig-{{ fileitem.fileid }}">
                <!--<div class="unknownonlyfields"><div class="titlebox titlefullwidth buttongroupequivalent">UNKNOWN STATE</div>
                </div>--><div class="movieonlyfields"><span class="fieldlabel">Save As Film</span>
                </div><div class="tvshowonlyfields"><span class="fieldlabel">Save As:</span><select name="episodeselector-{{ fileitem.fileid }}" class="fileepisode">
                </select></div>{% if fileitem.filetype == "subtitle" %}<div class="tvshowonlyfields movieonlyfields"><span class="fieldlabel">Subtitle:</span><select name="subtitleselector-{{ fileitem.fileid }}" class="filesubtitle">
                </select></div>{% endif %}
        </div></div>{% endif %}</div><div class="tilesplitter splitterline"></div><div class="subtitlebox fileleft">
            {{ fileitem.filename }}
        </div><div class="subtitlebox fileright">
            <img id="filetype-{{ fileitem.fileid }}" src="./static/images/filetype_{{ fileitem.filetype }}.png" alt="{{ fileitem.filetype }}" />{{ fileitem.size }}
        </div>
    </div>{% endfor %}
</div>{% endblock %}



{% block toolbar %}<div class="actionbuttonsgroup">
    <div class="readmodebuttons"><button type="button" id="Exit" onclick="javascript:window.location.replace('/');"><img src="./static/images/torrentaction_exit.png" alt="exit button" />
    </button><button type="button" id="Stop" onclick="javascript:updateTorrentState('Stop');"><img src="./static/images/torrentaction_stop.png" alt="stop button" />
    </button><button type="button" id="Start" onclick="javascript:updateTorrentState('Start');"><img src="./static/images/torrentaction_start.png" alt="start button" />
    </button><button disabled type="button" id="Edit" onclick="javascript:editTorrentConfiguration();"><img src="./static/images/torrentaction_edit.png" alt="edit button" />
    </button><button disabled type="button" id="Copy" onclick="javascript:copyTorrent();"><img src="./static/images/torrentaction_copy.png" alt="copy button" />
    </button><button type="button" id="Delete" onclick="javascript:deleteTorrent();"><img src="./static/images/torrentaction_delete.png" alt="delete button" />
    </button></div><div class="editmodebuttons"><button type="button" id="Cancel" onclick="javascript:cancelTorrentConfiguration();"><img src="./static/images/torrentaction_cancel.png" alt="commit button" />
    </button><button type="button" id="Save" onclick="javascript:saveTorrentConfiguration();"><img src="./static/images/torrentaction_commit.png" alt="commit button" />
    </button></div>
</div>
{% endblock %}



{% block dialogs %}
<div id="copydialog" class="screenblock hidden">
    <div class="dialog">
        <div class="dialogtitle">Copying Files...<button type="button" id="CloseCopy" onclick="javascript:closeCopyDialog();"><img src="./static/images/dialog_close.png" alt="close" /></button></div>
        <div class="dialogsplitter"></div>
        <div id="dialogcontent" class="dialogcontent"></div>
        <div class="dialogactions"><button type="button" id="ConfirmCopy" onclick="javascript:confirmCopy();"><img src="./static/images/dialog_go.png" alt="go" /></button></div>
    </div>
</div>
<div id="deletedialog" class="screenblock hidden">
    <div class="dialog">
        <div class="dialogtitle">Deleting Torrent...<button type="button" onclick="javascript:cancelDelete();"><img src="./static/images/dialog_close.png" alt="close" /></button></div>
        <div class="dialogsplitter"></div>
        <div class="dialogcontent"><div class="dialogitem dialogitemfull">Do you want to delete this torrent and all its files?</div></div>
        <div class="dialogactions"><button type="button" onclick="javascript:confirmDelete();"><img src="./static/images/dialog_go.png" alt="go" /></button></div>
    </div>
</div>
{% endblock %}



{% block hiddendata %}
<div class="hidden">
    <span id="copyprogress">0</span>
    <span id="copystep">0</span>
    <img src="./static/images/copy_queued.png" />
    <img src="./static/images/copy_copying.png" />
    <img src="./static/images/copy_connecting.png" />
    <img src="./static/images/copy_copied.png" />
    <img src="./static/images/copy_failed.png" />
</div>
{% endblock %}
